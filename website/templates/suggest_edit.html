{% extends 'base.html' %}

{% block content %}
    <div class="main flex-grow">
        <div class="bg-white rounded-2xl p-6 shadow-md mb-8">
            <h1 class="text-2xl font-semibold text-primary mb-6 text-center md:text-left">Suggest Edit for <span class="text-highlight">{{ influencer.name }}</span></h1>

            <form method="post" class="space-y-6">
                {% csrf_token %}

                {# Display non-field errors #}
                {% if form.non_field_errors %}
                    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                        <strong class="font-bold">Error!</strong>
                        <span class="block sm:inline">{{ form.non_field_errors }}</span>
                    </div>
                {% endif %}

                {# Iterate through form fields to apply Tailwind styling #}
                {% for field in form %}
                    <div class="form-group">
                        <label for="{{ field.id_for_label }}" class="block text-text text-sm font-medium mb-2">
                            {{ field.label }}
                            {% if field.field.required %}
                                <span class="text-red-500">*</span>
                            {% endif %}
                        </label>
                        {% if field.field.widget.input_type == 'checkbox' %}
                            <div class="flex items-center">
                                {{ field }}
                                <label for="{{ field.id_for_label }}" class="ml-2 text-text-light">{{ field.label }}</label>
                            </div>
                        {% else %}
                            {{ field }}
                        {% endif %}
                        
                        {# Display field errors #}
                        {% if field.errors %}
                            <ul class="text-red-500 text-xs italic mt-1">
                                {% for error in field.errors %}
                                    <li>{{ error }}</li>
                                {% endfor %}
                            </ul>
                        {% endif %}

                        {# Display help text #}
                        {% if field.help_text %}
                            <p class="text-text-light text-xs mt-1">{{ field.help_text }}</p>
                        {% endif %}
                    </div>
                {% endfor %}

                <button type="submit" class="w-full md:w-auto px-6 py-3 bg-primary text-white font-semibold rounded-md hover:bg-highlight transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
                    Submit Suggestion
                </button>
            </form>
        </div>
    </div>

    {# Custom styles for form fields to ensure consistent Tailwind appearance #}
    <style>
        /* Apply Tailwind-like styles to default Django form widgets */
        input[type="text"],
        input[type="email"],
        input[type="url"],
        input[type="number"],
        textarea {
            @apply block w-full px-4 py-2 border border-gray rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm;
        }

        /* Style for CKEditor textarea (if using django-ckeditor) */
        .cke_chrome {
            @apply border border-gray rounded-md shadow-sm;
        }
        .cke_bottom {
            @apply rounded-b-md;
        }
        .cke_top {
            @apply rounded-t-md;
        }
    </style>
{% endblock %}
